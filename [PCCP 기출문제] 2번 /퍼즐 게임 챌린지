def solution(diffs, times, limit):
    # 이분 탐색을 위한 범위 설정
    # 숙련도의 최솟값은 1, 최댓값은 diffs 중 가장 큰 값으로 설정합니다.
    low = 1
    high = max(diffs)
    answer = high

    while low <= high:
        mid = (low + high) // 2
        total_time = 0
        
        # mid 숙련도로 퍼즐을 풀었을 때 걸리는 총 시간 계산
        for i in range(len(diffs)):
            if diffs[i] <= mid:
                # 숙련도가 충분할 때
                total_time += times[i]
            else:
                # 숙련도가 부족할 때: (이전 시간 + 현재 시간) * 틀린 횟수 + 현재 시간
                # 틀린 횟수 = diffs[i] - mid
                mistakes = diffs[i] - mid
                time_prev = times[i-1] if i > 0 else 0
                total_time += (time_prev + times[i]) * mistakes + times[i]
            
            # 계산 도중 이미 제한 시간을 넘기면 중단 (효율성)
            if total_time > limit:
                break
        
        # 결과에 따라 탐색 범위 조정
        if total_time <= limit:
            # 시간 내에 해결 가능 -> 숙련도를 더 낮춰봅니다.
            answer = mid
            high = mid - 1
        else:
            # 시간 초과 -> 숙련도를 높여야 합니다.
            low = mid + 1
            
    return answer
